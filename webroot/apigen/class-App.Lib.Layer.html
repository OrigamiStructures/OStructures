<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class App\Lib\Layer | StudioManagerScratch</title>

	<link rel="stylesheet" href="resources/bootstrap.min.css?973e37a8502921d56bc02bb55321f45b072b6f71">
	<link rel="stylesheet" href="resources/style.css?49f43d3208c5d7e33fa16d36107a345bf11cc00d">

</head>

<body>
	<nav id="navigation" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<a href="index.html" class="navbar-brand">StudioManagerScratch</a>
			</div>
			<div class="collapse navbar-collapse">

                <form id="search" class="navbar-form navbar-left" role="search">
                    <input type="hidden" name="cx" value="">
                    <input type="hidden" name="ie" value="UTF-8">
                    <div class="form-group">
                        <input type="text" name="q" class="search-query form-control" placeholder="Search">
					</div>
				</form>

				<ul class="nav navbar-nav">
					<li>
						<a href="namespace-App.Lib.html" title="Summary of App\Lib"><span>Namespace</span></a>
					</li>
					<li class="active">
<span>Class</span>					</li>

					<li class="divider-vertical"></li>


						<li>
							<a href="annotation-group-todo.html" title="List of elements with todo annotation">
								<span>Todo</span>
							</a>
						</li>


				</ul>
			</div>
		</div>
	</nav>

	<div id="left">
	<div id="menu">

		<div id="groups">
				<h3>Namespaces</h3>
			<ul>
					<li class="active">
						<a href="namespace-App.html">
							App<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Cache.html">
							Cache						</a>
							</li>
					<li>
						<a href="namespace-App.Console.html">
							Console						</a>
							</li>
					<li>
						<a href="namespace-App.Controller.html">
							Controller<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Controller.Component.html">
							Component						</a>
							</li>
								</ul></li>
					<li>
						<a href="namespace-App.Database.html">
							Database<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Database.Type.html">
							Type						</a>
							</li>
								</ul></li>
					<li>
						<a href="namespace-App.Exception.html">
							Exception						</a>
							</li>
					<li>
						<a href="namespace-App.Form.html">
							Form						</a>
							</li>
					<li class="active">
						<a href="namespace-App.Lib.html">
							Lib<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Lib.Traits.html">
							Traits						</a>
							</li>
								</ul></li>
					<li>
						<a href="namespace-App.Model.html">
							Model<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Model.Behavior.html">
							Behavior						</a>
							</li>
					<li>
						<a href="namespace-App.Model.Entity.html">
							Entity<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.Model.Entity.EditionSubs.html">
							EditionSubs						</a>
							</li>
					<li>
						<a href="namespace-App.Model.Entity.Traits.html">
							Traits						</a>
							</li>
								</ul></li>
					<li>
						<a href="namespace-App.Model.Lib.html">
							Lib						</a>
							</li>
					<li>
						<a href="namespace-App.Model.Table.html">
							Table						</a>
							</li>
								</ul></li>
					<li>
						<a href="namespace-App.Shell.html">
							Shell						</a>
							</li>
					<li>
						<a href="namespace-App.SiteMetrics.html">
							SiteMetrics						</a>
							</li>
					<li>
						<a href="namespace-App.View.html">
							View<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.View.Cell.html">
							Cell						</a>
							</li>
					<li>
						<a href="namespace-App.View.Helper.html">
							Helper<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-App.View.Helper.Traits.html">
							Traits						</a>
							</li>
								</ul></li></ul></li></ul></li>
			</ul>
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li><a href="class-App.Lib.DispositionFilter.html">DispositionFilter</a></li>
				<li><a href="class-App.Lib.EditionHelperFactory.html">EditionHelperFactory</a></li>
				<li><a href="class-App.Lib.EditionTypeMap.html">EditionTypeMap</a></li>
				<li class="active"><a href="class-App.Lib.Layer.html">Layer</a></li>
				<li><a href="class-App.Lib.PieceFilter.html">PieceFilter</a></li>
				<li><a href="class-App.Lib.Range.html">Range</a></li>
				<li><a href="class-App.Lib.RenumberMessaging.html">RenumberMessaging</a></li>
				<li><a href="class-App.Lib.RenumberRequest.html">RenumberRequest</a></li>
				<li><a href="class-App.Lib.RenumberRequestHeap.html">RenumberRequestHeap</a></li>
				<li><a href="class-App.Lib.RenumberRequests.html">RenumberRequests</a></li>
				<li><a href="class-App.Lib.StateMap.html">StateMap</a></li>
				<li><a href="class-App.Lib.SystemState.html">SystemState</a></li>
				<li><a href="class-App.Lib.Wildcard.html">Wildcard</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class Layer</h1>


	<div class="description">
	<p>StackLayer</p>

<p>Streamline access to arrays of entities through a simple set of introspection
and retrieval methods.</p>

<p>There are also some very basic filtering and sorting tools but it's not clear
how much use they would be. But it's also not clear whether they would be needed.
We may want to remove some of that code.</p>
	</div>

	<dl class="tree well">
		<dd style="padding-left:0px">
<b><span>App\Lib\Layer</span></b>			
			
			 uses 
					Cake\Core\ConventionsTrait (not available)

			
		</dd>
	</dl>








	<div class="alert alert-info">
		
		
		<b>Namespace:</b> <a href="namespace-App.html">App</a>\<a href="namespace-App.Lib.html">Lib</a><br>
		

				<b>Author:</b>
				Main<br>
			<b>Located at</b> <a href="source-class-App.Lib.Layer.html#9-378" title="Go to source code">Lib/Layer.php</a>
		<br>
	</div>



		<div class="panel panel-default">
			<div class="panel-heading"><h2>Methods summary</h2></div>
			<table class="summary table table-bordered table-striped methods" id="methods">
		<tr data-order="__construct" id="___construct">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#___construct">#</a>
			<code><a href="source-class-App.Lib.Layer.html#53-79" title="Go to source code">__construct</a>( <span>array <var>$entities</var> = []</span>, <span>string <var>$type</var> = <span class="php-keyword1">NULL</span></span> )</code>

			<div class="description short">
				<p>Populate the object</p>
			</div>

			<div class="description detailed hidden">
				<p>Populate the object</p>

<p>This sets the layer name (lower class singular camelized),
name of the stored entity (eg: Format, Address, Piece),
and stores the provided entities indexed by their IDs.</p>

<p>The actual entity class name will be used to set the two text
property values unless the array is empty. In that case, the name
must be provided on the second param or an exception is raised.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$entities</var></dt>
						<dd></dd>
						<dt><var>$type</var></dt>
						<dd>Forced to camalized, ignored if entities are present</dd>
					</dl></div>


					<h4>Throws</h4>
					<div class="list">
						<code><a href="class-App.Exception.BadClassConfigurationException.html">App\Exception\BadClassConfigurationException</a></code>
					</div>



			</div>
			</div></td>
		</tr>
		<tr data-order="has" id="_has">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_has">#</a>
			<code><a href="source-class-App.Lib.Layer.html#81-89" title="Go to source code">has</a>( <span>string <var>$id</var></span> )</code>

			<div class="description short">
				<p>Does the set contain an entity with ID = $id</p>
			</div>

			<div class="description detailed hidden">
				<p>Does the set contain an entity with ID = $id</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$id</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="name" id="_name">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_name">#</a>
			<code><a href="source-class-App.Lib.Layer.html#91-98" title="Go to source code">name</a>( )</code>

			<div class="description short">
				<p>The type/name of this layer data</p>
			</div>

			<div class="description detailed hidden">
				<p>The type/name of this layer data</p>



					<h4>Returns</h4>
					<div class="list">
						string
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="entityClass" id="_entityClass">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_entityClass">#</a>
			<code><a href="source-class-App.Lib.Layer.html#100-106" title="Go to source code">entityClass</a>( )</code>

			<div class="description short">
				<p>The entity class name of the stored objects</p>
			</div>

			<div class="description detailed hidden">
				<p>The entity class name of the stored objects</p>



					<h4>Returns</h4>
					<div class="list">
						string
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="isClean" id="_isClean">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_isClean">#</a>
			<code><a href="source-class-App.Lib.Layer.html#108-125" title="Go to source code">isClean</a>( )</code>

			<div class="description short">
				<p>Are are all the entities ( NOT dirty() )</p>
			</div>

			<div class="description detailed hidden">
				<p>Are are all the entities ( NOT dirty() )</p>



					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>


					<h4>Todo</h4>
					<div class="list">
							<p>This may not be appropriate. Make this immutable and handle edits in
     different structures external to this object? The entities can easily
     be taken out and put in a different object (except they are then
     references). But then again, when we emit arrays, they are references to
     these contained objects and so, might change</p><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="load" id="_load">

			<td class="attributes"><code>
				 public 
				Entity
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_load">#</a>
			<code><a href="source-class-App.Lib.Layer.html#127-189" title="Go to source code">load</a>( <span>string <var>$type</var></span>, <span> <var>$options</var> = []</span> )</code>

			<div class="description short">
				<p>The StackLayer's version of a find()</p>
			</div>

			<div class="description detailed hidden">
				<p>The StackLayer's version of a find()</p>

<p>Supports some simple filtering and sorting</p>

<pre><span class="php-var">$editions</span>-&gt;get(<span class="php-num">312</span>);  <span class="php-comment">//edition-&gt;id = 312</span>
<span class="php-var">$artworks</span>-&gt;get(<span class="php-quote">'title'</span>, <span class="php-quote">'Yosemite'</span>); <span class="php-comment">//atwork-&gt;title = 'Yosemite'</span>
<span class="php-var">$artworks</span>-&gt;get(<span class="php-quote">'title'</span>, [<span class="php-quote">'Yosemite'</span>, <span class="php-quote">'Yellowstone'</span>]
<span class="php-var">$pieces</span>-&gt;get(<span class="php-quote">'all'</span>);  <span class="php-comment">//return all stored entities</span>
<span class="php-var">$pieces</span>-&gt;get(<span class="php-quote">'first); //return the first stored entity
$pieces-&gt;get('</span>first<span class="php-quote">', ['</span>edition_id<span class="php-quote">', 455]); //first where piece-&gt;edition_id = 455</span></pre>

<h3>Be careful, this will return references to the entities. Any changes to them will ripple back into this package. And this class was designed for access by rendering processes, not edit-clycle processes.</h3>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$type</var></dt>
						<dd>$id</dd>
						<dt><var>$options</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						Entity
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="count" id="_count">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_count">#</a>
			<code><a href="source-class-App.Lib.Layer.html#191-198" title="Go to source code">count</a>( )</code>

			<div class="description short">
				<p>The count of stored entities in this layer</p>
			</div>

			<div class="description detailed hidden">
				<p>The count of stored entities in this layer</p>



					<h4>Returns</h4>
					<div class="list">
						integer
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="IDs" id="_IDs">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_IDs">#</a>
			<code><a href="source-class-App.Lib.Layer.html#200-207" title="Go to source code">IDs</a>( )</code>

			<div class="description short">
				<p>Get an array of the IDs of the stored entities</p>
			</div>

			<div class="description detailed hidden">
				<p>Get an array of the IDs of the stored entities</p>



					<h4>Returns</h4>
					<div class="list">
						array
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="distinct" id="_distinct">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_distinct">#</a>
			<code><a href="source-class-App.Lib.Layer.html#209-219" title="Go to source code">distinct</a>( <span> <var>$property</var></span> )</code>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				







			</div>
			</div></td>
		</tr>
		<tr data-order="linkedTo" id="_linkedTo">

			<td class="attributes"><code>
				 public 
				null|array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_linkedTo">#</a>
			<code><a href="source-class-App.Lib.Layer.html#221-247" title="Go to source code">linkedTo</a>( <span>string <var>$layer</var></span>, <span>string <var>$id</var></span> )</code>

			<div class="description short">
				<p>Get the records with a matching foreign key value</p>
			</div>

			<div class="description detailed hidden">
				<p>Get the records with a matching foreign key value</p>

<pre><span class="php-var">$pieces</span>-&gt;linkedTo(<span class="php-quote">'format'</span>, <span class="php-num">434</span>)</pre>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$layer</var></dt>
						<dd>The simple name of the associate (eg: artwork, format)</dd>
						<dt><var>$id</var></dt>
						<dd>The foreign key value to match</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						null|array
					</div>


					<h4>Todo</h4>
					<div class="list">
							<p>this will only work on belongsTo associations where the entity
     were searching has a property like 'artwork_id'. It's an open question
     whether some entities will carry the join table from a HABTM
     association. If some do, and if we need to use the data, it is usually
     found in a nested layer on an entity property. Two main questions
     then; 1) how would we insure it always came in with the data
     2) would it be more convenient to use mapper/reducer functions to
     move it up out of the (somewhat messy) native nest structure?</p><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="filter" id="_filter">

			<td class="attributes"><code>
				 public 
				type
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_filter">#</a>
			<code><a href="source-class-App.Lib.Layer.html#249-274" title="Go to source code">filter</a>( <span>type <var>$property</var></span>, <span>type <var>$value</var></span> )</code>

			<div class="description short">
				<p>Provide single column search</p>
			</div>

			<div class="description detailed hidden">
				<p>Provide single column search</p>

<pre><span class="php-var">$formats</span>-&gt;filter(<span class="php-quote">'title'</span>, <span class="php-quote">'Boxed Set'</span>);
 <span class="php-var">$pieces</span>-&gt;filter(<span class="php-quote">'number'</span>, <span class="php-num">12</span>);
 <span class="php-var">$pieces</span>-&gt;filter(<span class="php-quote">'number'</span>, [<span class="php-num">6</span>, <span class="php-num">8</span>, <span class="php-num">10</span>);</pre>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$property</var></dt>
						<dd></dd>
						<dt><var>$value</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						type
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="sort" id="_sort">

			<td class="attributes"><code>
				 public 
				type
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_sort">#</a>
			<code><a href="source-class-App.Lib.Layer.html#276-298" title="Go to source code">sort</a>( <span>type <var>$property</var></span>, <span>type <var>$dir</var> = \SORT_DESC</span>, <span>type <var>$type</var> = \SORT_NUMERIC</span> )</code>

			<div class="description short">
				<p>Provide single column sorting</p>
			</div>

			<div class="description detailed hidden">
				<p>Provide single column sorting</p>

<pre><span class="php-var">$artworks</span>-&gt;<span class="php-keyword2">sort</span>(<span class="php-quote">'title'</span>);
 <span class="php-var">$pieces</span>-&gt;<span class="php-keyword2">sort</span>(<span class="php-quote">'number'</span>, SORT_ASC, SORT_NUMERIC);</pre>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$property</var></dt>
						<dd></dd>
						<dt><var>$dir</var></dt>
						<dd></dd>
						<dt><var>$type</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						type
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="_verifyProperty" id="__verifyProperty">

			<td class="attributes"><code>
				 protected 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#__verifyProperty">#</a>
			<code><a href="source-class-App.Lib.Layer.html#302-310" title="Go to source code">_verifyProperty</a>( <span>string <var>$property</var></span> )</code>

			<div class="description short">
				<p>Does the $property exist in this entity?</p>
			</div>

			<div class="description detailed hidden">
				<p>Does the $property exist in this entity?</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$property</var></dt>
						<dd></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>




			</div>
			</div></td>
		</tr>
			</table>
		</div>











		<div class="panel panel-default">
            <div class="panel-heading"><h2>Properties summary</h2></div>
			<table class="summary table table-bordered table-striped properties" id="properties">
		<tr data-order="_layer" id="$_layer">
			<td class="attributes"><code>
				protected  
				string
			</code></td>

			<td class="name">
					<a href="source-class-App.Lib.Layer.html#25-30" title="Go to source code"><var>$_layer</var></a>

				<div class="description short">
					<p>The lower case, singular name of this layer (matches the entity type)</p>
				</div>

				<div class="description detailed hidden">
					<p>The lower case, singular name of this layer (matches the entity type)</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_layer" class="anchor">#</a>
					<code></code>
				</div>
			</td>
		</tr>
		<tr data-order="_className" id="$_className">
			<td class="attributes"><code>
				protected  
				string
			</code></td>

			<td class="name">
					<a href="source-class-App.Lib.Layer.html#32-37" title="Go to source code"><var>$_className</var></a>

				<div class="description short">
					<p>Name of the stored entity class</p>
				</div>

				<div class="description detailed hidden">
					<p>Name of the stored entity class</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_className" class="anchor">#</a>
					<code></code>
				</div>
			</td>
		</tr>
		<tr data-order="_entities" id="$_entities">
			<td class="attributes"><code>
				protected  
				array
			</code></td>

			<td class="name">
					<a href="source-class-App.Lib.Layer.html#39-44" title="Go to source code"><var>$_entities</var></a>

				<div class="description short">
					<p>The stored entities in this set</p>
				</div>

				<div class="description detailed hidden">
					<p>The stored entities in this set</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_entities" class="anchor">#</a>
					<code>[]</code>
				</div>
			</td>
		</tr>
		<tr data-order="_entityProperties" id="$_entityProperties">
			<td class="attributes"><code>
				protected  
				array
			</code></td>

			<td class="name">
					<a href="source-class-App.Lib.Layer.html#46-51" title="Go to source code"><var>$_entityProperties</var></a>

				<div class="description short">
					<p>The properties that can be found on the entities</p>
				</div>

				<div class="description detailed hidden">
					<p>The properties that can be found on the entities</p>

				</div>
			</td>
			<td class="value">
				<div>
					<a href="#$_entityProperties" class="anchor">#</a>
					<code>[]</code>
				</div>
			</td>
		</tr>
			</table>
		</div>






</div>
	</div>

	<div id="footer">
		StudioManagerScratch API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
<script src="resources/combined.js"></script>
<script src="elementlist.js"></script>
</body>
</html>
